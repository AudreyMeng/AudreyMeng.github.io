<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Audrey&#39;s Secret Garden</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Audrey&#39;s Secret Garden">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Audrey&#39;s Secret Garden">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Audrey&#39;s Secret Garden">
  
    <link rel="alternate" href="/atom.xml" title="Audrey&#39;s Secret Garden" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="index.html" id="logo">Audrey&#39;s Secret Garden</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="index.html">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-StatePattern" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="2019/10/07/StatePattern/" class="article-date">
  <time datetime="2019-10-08T05:13:09.000Z" itemprop="datePublished">2019-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="2019/10/07/StatePattern/">State Pattern</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is an introduction to state pattern.</p>
<h2 id="What-is-State-Pattern"><a href="#What-is-State-Pattern" class="headerlink" title="What is State Pattern"></a>What is State Pattern</h2><p>Allows an object to alter its behavior when its internal state changes.</p>
<h3 id="Key-Points"><a href="#Key-Points" class="headerlink" title="Key Points"></a>Key Points</h3><ol>
<li>An object has multiple <strong>states</strong>.</li>
<li>State is a <strong>interface</strong> with some methods.</li>
<li>Each specific state implements <strong>all method behaviors</strong>, includes state shifting.</li>
<li>The object class will hold instance variables for <strong>all state types</strong> and a <strong>State</strong> type variable.</li>
<li><strong>Shared</strong> methods like setState or variables shared by all state are still in object class.<ul>
<li>Each state class use object instance to access shared methods/variables.</li>
</ul>
</li>
</ol>
<h2 id="Gumball-Machine-Example"><a href="#Gumball-Machine-Example" class="headerlink" title="Gumball Machine Example"></a>Gumball Machine Example</h2><p>Gumball machine has multiple states, all states has <strong>same</strong> methods(insertCoin, ejectCoin,<br>dispenseCoinâ€¦) but with <strong>different</strong> behaviors.</p>
<p>State Pattern Solution:</p>
<ul>
<li>Define State interface to hold all diverse behaviors,</li>
<li>GumballMachine class <ul>
<li>holds instance variable for all state class types and one State variable,</li>
<li>setState and gumball number variable/getGumballNumber are all in this class,</li>
</ul>
</li>
<li>Implement each state class<ul>
<li>state changes also happens inside these class,</li>
<li><strong>GumballMachine instance is passed in to give us access to shared methods/variables</strong>.</li>
</ul>
</li>
</ul>
<h2 id="My-Code-Example"><a href="#My-Code-Example" class="headerlink" title="My Code Example"></a>My Code Example</h2><p><a href="/2019/10/07/StatePattern//github.com/AudreyMeng/Java/tree/master/StatePattern" target="_blank" rel="noopener">https://github.com/AudreyMeng/Java/tree/master/StatePattern</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><em>Head First Design Pattern</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/07/StatePattern/" data-id="ck1he32mu0000nbxfx096zrs7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-StrategyPattern" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="2019/10/07/StrategyPattern/" class="article-date">
  <time datetime="2019-10-08T04:51:49.000Z" itemprop="datePublished">2019-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="2019/10/07/StrategyPattern/">Strategy Pattern</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is an introduction to Strategy Design Pattern.</p>
<h2 id="What-is-Strategy-Design-Pattern"><a href="#What-is-Strategy-Design-Pattern" class="headerlink" title="What is Strategy Design Pattern"></a>What is Strategy Design Pattern</h2><h3 id="Concept"><a href="#Concept" class="headerlink" title="Concept"></a>Concept</h3><p>defines a family of algorithms,<br>encapsulates each one, and makes them interchangeable.<br>Strategy lets the algorithm vary independently from<br>clients that use it.</p>
<h3 id="Key-Points"><a href="#Key-Points" class="headerlink" title="Key Points"></a>Key Points</h3><ol>
<li>Base class extends to various child class type, children share/vary some behaviors</li>
<li>For <strong>shared</strong> behaviors, implement in <strong>base</strong> class</li>
<li>For <strong>varied</strong> for each typed class, implement in <strong>child</strong> class</li>
<li>For behaviors some children share, some vary, <ul>
<li>declare <strong>instance variables</strong> in base class,</li>
<li><strong>interface</strong> types, </li>
<li>determine specific behaviors at <strong>runtime</strong>,</li>
<li>can change <strong>dynamically</strong> by <strong>set</strong> methods.</li>
</ul>
</li>
</ol>
<h2 id="duck-example"><a href="#duck-example" class="headerlink" title="duck example"></a>duck example</h2><p>Requirements: a duck game with many kinds of different ducks.<br>    Shared behaviors: swim<br>    Behaviors varied each type: display<br>    Behaviors some vary, some share: fly, quack</p>
<p>The first 2 kinds of behaviors are easy to handle:<br>   shared swim: implement in base class<br>   varied display: implement in each child class type.</p>
<p>The key is to design the 3rd kind of behavior.</p>
<p>Here is 3 different kinds of design:</p>
<h3 id="inheritance"><a href="#inheritance" class="headerlink" title="inheritance"></a>inheritance</h3><p>Implement fly/quack in base class as pic below, then all children type shares same behaviors. <strong>Not working</strong>!<br>Implement fly/quack in each child class, it works, but lots of <strong>duplicate</strong> code.<br><img src="/2019/10/07/StrategyPattern/inheritance.png" alt="Inheritance Duck"></p>
<h3 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h3><p>All child classes have to override fly/quack interface, <strong>tons of duplicate work</strong>.<br><img src="/2019/10/07/StrategyPattern/interface.png" alt="Interface Duck"></p>
<h3 id="strategy-pattern"><a href="#strategy-pattern" class="headerlink" title="strategy pattern"></a>strategy pattern</h3><p>Perfect way so far!<br>keep shared behaviors to <strong>reduce code</strong> work.<br>Instance variables from interfaces enables us to <strong>encapsulate</strong> just a couple of fly/quack behaviors to apply on all child classes.<br>Moreover, dynamic set methods in base class enable us <strong>dynamically</strong> change fly/quack behaviors.<br><img src="/2019/10/07/StrategyPattern/duck.png" alt="Strategy Pattern Duck"></p>
<h2 id="My-Code-Example"><a href="#My-Code-Example" class="headerlink" title="My Code Example"></a>My Code Example</h2><p><a href="/2019/10/07/StrategyPattern//github.com/AudreyMeng/Java/tree/master/StrategyPattern" target="_blank" rel="noopener">https://github.com/AudreyMeng/Java/tree/master/StrategyPattern</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><em>Head First Design Pattern</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/07/StrategyPattern/" data-id="ck1he32mz0001nbxfg0f9vgid" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Binding" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="2019/09/30/Binding/" class="article-date">
  <time datetime="2019-10-01T05:18:01.000Z" itemprop="datePublished">2019-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="2019/09/30/Binding/">Dynamic Filter Binding</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="What-is-Dynamic-Filter-Binding"><a href="#What-is-Dynamic-Filter-Binding" class="headerlink" title="What is Dynamic Filter Binding?"></a>What is Dynamic Filter Binding?</h2><p>Bind filters to resource methods programmatically during the app initialization time.</p>
<h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><ol>
<li>Filter</li>
<li>DynamicFeature</li>
<li>Resource</li>
</ol>
<h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><ul>
<li>implements ContainerRequestFilter, ContainerResponseFilter</li>
<li>override filter method</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogFilter</span> <span class="keyword">implements</span> <span class="title">ContainerRequestFilter</span>, <span class="title">ContainerResponseFilter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">filter</span><span class="params">(ContainerRequestContext reqContext)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">      log(reqContext.getUriInfo(), reqContext.getHeaders());</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">filter</span><span class="params">(ContainerRequestContext reqContext,</span></span></span><br><span class="line"><span class="function"><span class="params">                     ContainerResponseContext resContext)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">      log(reqContext.getUriInfo(), resContext.getHeaders());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(UriInfo uriInfo, MultivaluedMap&lt;String, ?&gt; headers)</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"Path: "</span> + uriInfo.getPath());</span><br><span class="line">      headers.entrySet().forEach(h -&gt; System.out.println(h.getKey() + <span class="string">": "</span> + h.getValue()));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="DynamicFeature"><a href="#DynamicFeature" class="headerlink" title="DynamicFeature"></a>DynamicFeature</h3><ul>
<li>@Provider</li>
<li>implements DynamicFeature</li>
<li>override configure to register filter (only works for path â€˜/orderâ€™)</li>
<li>bind filter with resource</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Provider</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FilterRegistrationFeature</span> <span class="keyword">implements</span> <span class="title">DynamicFeature</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(ResourceInfo resourceInfo, FeatureContext context)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (MyResource.class.isAssignableFrom(resourceInfo.getResourceClass())) &#123;</span><br><span class="line">          Method method = resourceInfo.getResourceMethod();</span><br><span class="line">          <span class="keyword">if</span> (method.getName().toLowerCase().contains(<span class="string">"order"</span>)) &#123;</span><br><span class="line">              context.register(<span class="keyword">new</span> LogFilter());</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h3><p>Define path and verb.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Path</span>(<span class="string">""</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyResource</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GET</span></span><br><span class="line">  <span class="meta">@Path</span>(<span class="string">"customers"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getAllCustomers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"in getAllCustomers()"</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"dummy-response for all customers"</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GET</span></span><br><span class="line">  <span class="meta">@Path</span>(<span class="string">"customers/&#123;id&#125;"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getCustomerById</span><span class="params">(@PathParam(<span class="string">"id"</span>)</span> String id) </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"in getCustomerById()"</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"dummy-response for customer "</span> + id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GET</span></span><br><span class="line">  <span class="meta">@Path</span>(<span class="string">"orders"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getOrders</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"in getOrders()"</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"dummy-response for orders"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="/2019/09/30/Binding//www.logicbig.com/tutorials/java-ee-tutorial/jax-rs/filters-dynamic-binding.html" target="_blank" rel="noopener">https://www.logicbig.com/tutorials/java-ee-tutorial/jax-rs/filters-dynamic-binding.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/09/30/Binding/" data-id="ck1he32n50003nbxf2elj05xg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-dropwizard" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="2019/09/30/dropwizard/" class="article-date">
  <time datetime="2019-10-01T05:07:43.000Z" itemprop="datePublished">2019-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="2019/09/30/dropwizard/">Introduction to Dropwizard</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="What-is-Dropwizard"><a href="#What-is-Dropwizard" class="headerlink" title="What is Dropwizard"></a>What is Dropwizard</h2><p>Treat it as a library or a framework.<br>To provide implementations of everything a production-ready web application needs.</p>
<h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><ol>
<li>Application</li>
<li>Configuration</li>
<li>Representation</li>
<li>Resource</li>
<li>Health Check<br><img src="/2019/09/30/dropwizard/dropwizard.png" alt="Dropwizard"></li>
</ol>
<h3 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h3><p>(HelloWorldApplication.java): startup the app.</p>
<p> 1, <code>static main</code> is appâ€™s entry point.<br> 2, Register resource: in <code>run</code> method, 1,new resource instance 2,add to Jersey env.<br> 3, read configuration from <code>HelloWorldConfiguration</code></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.helloworld;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldApplication</span> <span class="keyword">extends</span> <span class="title">Application</span>&lt;<span class="title">HelloWorldConfiguration</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> HelloWorldApplication().run(args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(Bootstrap&lt;HelloWorldConfiguration&gt; bootstrap)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// configure aspects of the application required before the application is run</span></span><br><span class="line">        <span class="comment">// like bundles, configuration source providers</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(HelloWorldConfiguration configuration,</span></span></span><br><span class="line"><span class="function"><span class="params">                    Environment environment)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> HelloWorldResource resource = <span class="keyword">new</span> HelloWorldResource(</span><br><span class="line">            configuration.getTemplate(),</span><br><span class="line">            configuration.getDefaultName()</span><br><span class="line">        );</span><br><span class="line">        <span class="comment">// REGISTER RESOURCE</span></span><br><span class="line">        environment.jersey().register(resource);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><p>(HelloWorldConfiguration.java): environment configuration.<br>Parameters are specified in a <code>YAML</code> configuration file.<br>Dropwizard parses the provided <code>YAML</code> configuration file and builds an instance of app configuration class by mapping YAML field names to object field names.</p>
<h3 id="Representation"><a href="#Representation" class="headerlink" title="Representation"></a>Representation</h3><p>(Saying.java): API Data Structure.<br>Request content:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;id&quot;: 1,</span><br><span class="line">  &quot;content&quot;: &quot;Hi!&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Translate to representation class:<br>Jackson to serialize/deserialize <code>@JsonProperty</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.helloworld.api;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Saying</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Saying</span><span class="params">(<span class="keyword">long</span> id, String content)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonProperty</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonProperty</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h3><p>(HelloWordResource.java): service implementation entry point<br><code>@Path</code> (URI: <code>/hello-world</code>) and <code>@Produces</code> (Jerseyâ€™s content negotiation code: <code>application/json</code>)</p>
<p>request <code>/hello-world?name=Dougie</code>: sayHello method will be called with <code>Optional.of(&quot;Dougie&quot;)</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.helloworld.resources;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Path</span>(<span class="string">"/hello-world"</span>)</span><br><span class="line"><span class="meta">@Produces</span>(MediaType.APPLICATION_JSON)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldResource</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String defaultName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloWorldResource</span><span class="params">(String defaultName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.defaultName = defaultName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GET</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Saying <span class="title">sayHello</span><span class="params">(@QueryParam(<span class="string">"name"</span>)</span> Optional&lt;String&gt; name) </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> String value = String.format(template, name.orElse(defaultName));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Saying(counter.incrementAndGet(), value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Health-Check"><a href="#Health-Check" class="headerlink" title="Health Check"></a>Health Check</h3><p>(TemplateHealthCheck.java): runtime tests that show if the app still works.</p>
<h2 id="Bootstrap"><a href="#Bootstrap" class="headerlink" title="Bootstrap"></a>Bootstrap</h2><p>Bootstrap is the the <strong>pre-start(temp)</strong> application environment, containing everything required to bootstrap a Dropwizard command.</p>
<p>Before a Dropwizard application can provide the command-line interface, parse a configuration file, it must first go through a bootstrapping phase. </p>
<p>This phase corresponds to <strong>initialize</strong> method. You can add Bundles, or register Jackson modules to include custom types as part of your configuration class.</p>
<h2 id="Environments"><a href="#Environments" class="headerlink" title="Environments"></a>Environments</h2><p>A Dropwizard Environment consists of all the Resources, servlets, filters, Health Checks, Jersey providers, Managed Objects, Tasks, and Jersey properties.</p>
<p>Application class <strong>run</strong> method: where to create new resource instances, etc., and adding them to the given Environment class</p>
<p>Environment is a <strong>longer-lived object, holding Dropwizardâ€™s Environment</strong> (not env. Such as dev or prod). It holds a similar, but somewhat different set of properties than the Bootsrap object.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="/2019/09/30/dropwizard//www.dropwizard.io/en/stable/getting-started.html" target="_blank" rel="noopener">http://www.dropwizard.io/en/stable/getting-started.html</a><br><a href="/2019/09/30/dropwizard//xebia.com/blog/dropwizard/" target="_blank" rel="noopener">https://xebia.com/blog/dropwizard/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/09/30/dropwizard/" data-id="ck1he32n20002nbxf2mx3ef6f" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-guice" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="2019/09/28/guice/" class="article-date">
  <time datetime="2019-09-29T06:24:27.000Z" itemprop="datePublished">2019-09-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="2019/09/28/guice/">Introduction to Guice</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I hope to make this place my secret garden to track my technique growth.<br>This is my first post. Simple notes about Google Guice.</p>
<p><img src="/2019/09/28/guice/guice.png" alt="Guice Logo"></p>
<h2 id="What-is-Guice"><a href="#What-is-Guice" class="headerlink" title="What is Guice"></a>What is Guice</h2><p>The best resource is always the official website.</p>
<p>Think of Guiceâ€™s @Inject as the new new.<br>Guice can build the object graph.</p>
<h3 id="Linked-Bindings"><a href="#Linked-Bindings" class="headerlink" title="Linked Bindings"></a>Linked Bindings</h3><p>Map a type to its implementation.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BillingModule</span> <span class="keyword">extends</span> <span class="title">AbstractModule</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span> </span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    bind(TransactionLog.class).to(DatabaseTransactionLog.class);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>When you call injector.getInstance(TransactionLog.class), or when the injector encounters a dependency on TransactionLog, it will use a DatabaseTransactionLog. </p>
<h3 id="Provides-Methods"><a href="#Provides-Methods" class="headerlink" title="@Provides Methods"></a>@Provides Methods</h3><p>To create an object. Must be defined within a module.</p>
<h3 id="Scopes"><a href="#Scopes" class="headerlink" title="Scopes"></a>Scopes</h3><p>By default, Guice returns a new instance each time it supplies a value. </p>
<p>@Singleton :to reuse instances for the lifetime of an application</p>
<p>Typical Example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Provides @Singleton</span><br><span class="line">TransactionLog provideTransactionLog() &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Injections"><a href="#Injections" class="headerlink" title="Injections"></a>Injections</h3><p>Constructor Injection: annotate the constructor with the @Inject annotation<br>Method/Field Injection</p>
<h4 id="Injection-Example"><a href="#Injection-Example" class="headerlink" title="Injection Example"></a>Injection Example</h4><p>A simple inject example:</p>
<p><em><code>https://github.com/AudreyMeng/Java/tree/master/guiceTest1</code></em></p>
<p>To @inject Communicator implementation field in Communication:</p>
<ol>
<li><p>guiceStart createInjector for BasicModule and getInstance -&gt;</p>
</li>
<li><p>BasicModule extends AbstractModule, </p>
</li>
<li><p>in BasicModule.configure method binds Communicator to Communication -&gt;</p>
</li>
<li><p>Communication class @inject a Communicator</p>
</li>
</ol>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="/2019/09/28/guice//github.com/google/guice" target="_blank" rel="noopener">https://github.com/google/guice</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/09/28/guice/" data-id="ck1he32n90004nbxfi282fqd4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="archives/2019/09/">September 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="2019/10/07/StatePattern/">State Pattern</a>
          </li>
        
          <li>
            <a href="2019/10/07/StrategyPattern/">Strategy Pattern</a>
          </li>
        
          <li>
            <a href="2019/09/30/Binding/">Dynamic Filter Binding</a>
          </li>
        
          <li>
            <a href="2019/09/30/dropwizard/">Introduction to Dropwizard</a>
          </li>
        
          <li>
            <a href="2019/09/28/guice/">Introduction to Guice</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Audrey Meng<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="index.html" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="fancybox/jquery.fancybox.css">
  <script src="fancybox/jquery.fancybox.pack.js"></script>


<script src="js/script.js"></script>



  </div>
</body>
</html>